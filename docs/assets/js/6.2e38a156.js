(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{172:function(t,a,s){"use strict";s.r(a);var e=s(0),n=Object(e.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p",[t._v("Let's start with the simplest of tasks:")]),t._v(" "),t._m(1),t._v(" "),s("p",[t._v("First, we'll define some parameters we'll use:")]),t._v(" "),t._m(2),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._m(6),t._v(" "),t._m(7),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),s("p",[t._v("Would be interpreted as:")]),t._v(" "),t._m(18),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),s("p",[t._v("Learn more about commands and custom commands "),s("router-link",{attrs:{to:"/commands.html"}},[t._v("in the next section")]),t._v(".")],1),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),t._m(35),t._v(" "),t._m(36)])},[function(){var t=this.$createElement,a=this._self._c||t;return a("h1",{attrs:{id:"components"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#components","aria-hidden":"true"}},[this._v("#")]),this._v(" Components")])},function(){var t=this.$createElement,a=this._self._c||t;return a("blockquote",[a("p",[this._v("Add an entry to "),a("code",[this._v("~/.ssh/config")]),this._v(" on your "),a("strong",[this._v("local computer")]),this._v(".")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("fabula")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\nexport default {\n  host: 'server',\n  hostname: '1.2.3.4',\n  username: 'ubuntu',\n  privateKey: '/path/to/key'\n}\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("fabula")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("The "),a("code",[this._v("<fabula>")]),this._v(" block should contain an "),a("strong",[this._v("ES module")]),this._v(".")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Next we can add a "),a("code",[this._v("local")]),this._v(" "),a("code",[this._v("append")]),this._v(" command to the "),a("code",[this._v("<commands>")]),this._v(" section:")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("fabula")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\nexport default {\n  fail: false,\n  host: 'server',\n  hostname: '1.2.3.4',\n  username: 'ubuntu',\n  privateKey: '/path/to/key'\n}\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("fabula")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("commands")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n# Append a new line\nlocal echo >> ~/.ssh/config\n\n# Append specified block of text\nlocal append ~/.ssh/config:\n  Host <%= host %>\n      Hostname <%= hostname %>\n      User <%= user %>\n      IdentityFile <%= privateKey %>\n      StrictHostKeyChecking no\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("commands")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Save as "),a("code",[this._v("add-to-ssh.fab")]),this._v(" and run with:")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("fabula add-to-ssh\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"settings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#settings","aria-hidden":"true"}},[this._v("#")]),this._v(" Settings")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("The "),a("code",[this._v("<fabula>")]),this._v(" block should contain an "),a("strong",[this._v("ES module")]),this._v(". The\nmodule can either export an object containing all settings, or an\noptionally async function that returns such an object.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("fabula")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\nexport default async (fabula) => ({\n  fail: false,\n  host: 'server',\n  hostname: '1.2.3.4',\n  username: await fabula.prompt('Username:'),\n  privateKey: await fabula.prompt('Private key:'),\n})\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("fabula")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"syntax"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#syntax","aria-hidden":"true"}},[this._v("#")]),this._v(" Syntax")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Any Bash statement will work inside "),a("code",[this._v("<commands>")]),this._v(" (like the first one), but a\nfew others are recognized by handlers using "),a("strong",[this._v("Fabula")]),this._v("'s modular commands API,\nwhich cause them to process differently.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[t._v("As stated before, any line that starts with "),s("code",[t._v("local")]),t._v(" is ran on the local\nmachine. But in this snippet, we're also using Fabula's special "),s("code",[t._v("append")]),t._v(" command,\nwhich allows you to define an "),s("strong",[t._v("indented block of text")]),t._v(" (that gets\n"),s("strong",[t._v("automatically dedented")]),t._v(" when parsed) and append it to a file.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[t._v("Similarly, "),s("code",[t._v("local")]),t._v(" "),s("code",[t._v("write")]),t._v(" "),s("code",[t._v("...")]),t._v(" would overwrite the contents of the\nfile, instead of simply appending to it. Both "),s("code",[t._v("append")]),t._v(" and "),s("code",[t._v("write")]),t._v(" are special\ncommands provided by "),s("strong",[t._v("Fabula")]),t._v(".")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"prepend"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prepend","aria-hidden":"true"}},[this._v("#")]),this._v(" Prepend")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[t._v("You can append a command within the "),s("code",[t._v("<commands>")]),t._v(" tag to automatically prepepend\nit every command within the block. Note that "),s("code",[t._v("sudo")]),t._v(" is never prepended to\n"),s("strong",[t._v("special")]),t._v(" or "),s("strong",[t._v("custom")]),t._v(" commands, because those run under the same permission\nas the "),s("strong",[t._v("Fabula")]),t._v(" task is running on.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("commands")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("local")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("sudo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\napt update -y\napt install nginx -y\nwrite /tmp/file:\n  test contents\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("commands")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("commands")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\nlocal sudo apt update -y\nlocal sudo apt install nginx -y\nlocal write /tmp/file:\n  test contents\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("commands")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"strings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#strings","aria-hidden":"true"}},[this._v("#")]),this._v(" Strings")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("As simple as these blocks of inline text can be (way\nprettier than using native Bash at least), they can still be kind of funky for\nsome people. "),a("strong",[this._v("Fabula")]),this._v(" offers yet another alternative to this case, which is\nto add a "),a("code",[this._v("<string>")]),this._v(" block with an identifier, that can later be referenced by\nan alternatively recognizable syntax for the special "),a("code",[this._v("append")]),this._v(" command:")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("fabula")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\nexport default {\n  host: 'server',\n  hostname: '1.2.3.4',\n  username: 'ubuntu',\n  privateKey: '/path/to/key'\n}\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("fabula")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("sshConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\nHost <%= host %>\n    Hostname <%= hostname %>\n    User <%= username %>\n    IdentityFile <%= privateKey %>\n    StrictHostKeyChecking no\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("commands")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n# Append a new line\nlocal echo >> ~/.ssh/config\n\n# Append specified string\nlocal append ~/.ssh/config strings.sshConfig\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("commands")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Notice that in this case "),a("code",[this._v("local append ~/.ssh/config")]),this._v(" is not followed by a\ncolon and block of text, but rather "),a("code",[this._v("strings.sshConfig")]),this._v(".")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Every string block is made available internally in the global settings object\nas "),a("code",[this._v("strings.$id")]),this._v(", which in this case, is referenced internally by the\n"),a("code",[this._v("append")]),this._v(" command handler.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"dedent-modifier"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dedent-modifier","aria-hidden":"true"}},[this._v("#")]),this._v(" Dedent modifier")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("You can force dedention of text to the number of total white spaces in the first line by appending the "),a("code",[this._v("dedented")]),this._v(" modifier.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("dedented")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  White space at the beginning will be removed.\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"chaining"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#chaining","aria-hidden":"true"}},[this._v("#")]),this._v(" Chaining")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Since a "),a("strong",[this._v("Fabula")]),this._v(" component may itself run other components, you may want to\npass the settings and context of the parent component down to its children.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Use a dot as second parameter to "),a("code",[this._v("fabula")]),this._v(" to do so:")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("commands")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\nfabula . tasks/another-task\nfabula . tasks/some-other-task\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("commands")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("When "),a("code",[this._v("tasks/another-task")]),this._v(" runs, all settings from the caller component will be\nmerged with its own settings -- the latter having precedence.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("blockquote",[a("p",[a("strong",[this._v("The rest of this page refers to an unimplemented Fabula feature")]),this._v(". Work\nhas already started for these features to work and the following bits of\ndocumentation are currently serving as a specification.")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[t._v("Alternatively, you may also use a "),s("strong",[t._v("Fabula")]),t._v(" "),s("em",[t._v("component settings function")]),t._v(".\nIf the default export in the "),s("code",[t._v("<fabula>")]),t._v(" block is a function, it will run before\nany commands and also allow you to "),s("strong",[t._v("access its parent settings and current\nexecution state")]),t._v(" through its "),s("strong",[t._v("second")]),t._v(" and "),s("strong",[t._v("third")]),t._v(" arguments:")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("fabula")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\nexport default (fabula) => {\n  consola.info('Commands ran so far:', fabula.history.length)\n  return { ...fabula.settings, newSetting: 'foobar' }\n}\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("fabula")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[t._v("The "),s("code",[t._v("history")]),t._v(" parameter is an Array with the result objects of every command\nexecuted up to that point. Each result object contains "),s("code",[t._v("code")]),t._v(", "),s("code",[t._v("stdout")]),t._v(",\n"),s("code",[t._v("stderr")]),t._v(" and "),s("code",[t._v("cmd")]),t._v(" (the "),s("strong",[t._v("Fabula")]),t._v(" object representing the parsed command).")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[t._v("The first parameter contains the "),s("strong",[t._v("Fabula")]),t._v(" helper object, which currently\nonly provides access to "),s("code",[t._v("settings")]),t._v(", "),s("code",[t._v("history")]),t._v(" and "),s("code",[t._v("abort()")]),t._v(".")])}],!1,null,null,null);a.default=n.exports}}]);